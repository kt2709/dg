var app=angular.module("dgApp",["ui.bootstrap","angular.filter","smart-table"]);app.controller("dgCtrl",["$scope","$filter","$http","dgAppService",function(t,e,a,n){t.cities=["Delhi","Mumbai","Kolkata","Chennai","Hyderabad","Bangalore","Pune"],t.ratesByPage=5,t.shopsByPage=3,t.fetchData=function(e){t.selectedIndianCity=e,n.getDataforSelectedCity(t.selectedIndianCity).then(function(e){t.goldRatesByIndianCity=e.goldRatesByIndianCity.data,t.goldShopsByIndianCity=e.goldShopsByIndianCity.data})},n.getData().then(function(e){t.goldratesIndianCities=e.allGoldRates.data,t.selectedIndianCity=e.cityInfo.data.city,console.log(t.selectedIndianCity),t.selectedIndianCity&&n.getDataforSelectedCity(t.selectedIndianCity).then(function(e){t.goldRatesByIndianCity=e.goldRatesByIndianCity.data,t.goldShopsByIndianCity=e.goldShopsByIndianCity.data})})}]),app.factory("dgAppService",["$http","$q",function(t,e){return{getData:function(){var a=e.defer(),n=t.get("https://powerful-sands-79831.herokuapp.com/goldrates/"),i=t.get("//ip-api.com/json");return e.all([n,i]).then(function(t){a.resolve({allGoldRates:t[0],cityInfo:t[1]})}),a.promise},getDataforSelectedCity:function(a){var n=e.defer(),i=t.get("//powerful-sands-79831.herokuapp.com/goldrates/"+a),o=t.get("//powerful-sands-79831.herokuapp.com/goldshops/"+a);return e.all([i,o]).then(function(t){n.resolve({goldRatesByIndianCity:t[0],goldShopsByIndianCity:t[1]})}),n.promise}}}]);